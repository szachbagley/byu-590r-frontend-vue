import{m as q,_ as N,r,o as u,c as D,a as e,w as t,F as $,b as C,d as n,e as F,f as A,t as g,g as y}from"./index-14a34d96.js";const T={name:"ArticlesView",computed:{...q({articles(){return this.$store.state.article.articlesList},publications(){return this.$store.state.article.publications}})},created(){this.getArticles()},data:function(){return{newArticle:{title:"",author:"",link:"",image:"",publication_id:""},editArticle:{},selectedDeleteArticle:{},editArticleDialog:!1,createArticleDialog:!1,editImageChangeDialogBtn:!1,deleteArticleDialog:!1,articleIsDeleting:!1}},methods:{getArticles(){this.$store.dispatch("article/getArticles").then(()=>{console.log("Articles fetched successfully")}).catch(l=>{console.error("Error fetching articles:",l)})},opencreateArticleDialog(){this.newArticle={title:"",author:"",link:"",image:"",publication_id:1},this.createArticleDialog=!0},closeCreateDialog(){this.createArticleDialog=!1},openEditDialog(l){this.editArticle=l,this.editArticleDialog=!0},openDeleteDialog(l){this.selectedDeleteArticle=l,this.deleteArticleDialog=!0},createArticle(){this.articleIsCreating=!0,this.newArticleErrorMessage=null,this.$store.dispatch("article/createArticle",this.newArticle).then(()=>{this.closeCreateDialog(),this.articleIsCreating=!1}).catch(l=>{this.newArticleErrorMessage=l.response.data.data,this.articleIsCreating=!1})},updateArticle(){this.articleIsUpdating=!0,this.editArticleErrorMessage=null,this.$store.dispatch("article/updateArticle",this.editArticle).then(()=>{this.editArticleDialog=!1,this.editImageChangeDialogBtn=!1,this.editArticle={},this.articleIsUpdating=!1}).catch(l=>{this.editArticleErrorMessage=l.response.data.data,this.articleIsUpdating=!1})},deleteArticle(){this.articleIsDeleting=!0,this.deleteArticleErrorMessage=null,this.$store.dispatch("article/deleteArticle",this.selectedDeleteArticle.id).then(()=>{this.deleteArticleDialog=!1,this.selectedDeleteArticle={},this.articleIsDeleting=!1}).catch(l=>{this.articleIsDeleting=!1,this.deleteArticleErrorMessage=l.response.data.data})},onExistingArticleImageChange(l){var i=l.target.files||l.dataTransfer.files;i.length&&(this.editArticle.image=i[0],this.articleIsUpdating=!0,this.$store.dispatch("article/updateArticlePicture",this.editArticle).then(()=>{this.articleIsUpdating=!1}).catch(V=>{this.editArticleErrorMessage=V.response.data.data,this.articleIsUpdating=!1}))},onNewArticleFileChange(l){if(this.newArticle.image=null,!l||!l.target||!l.target.files)return;const i=l.target.files||l.dataTransfer.files;i.length&&(this.newArticle.image=i[0])}}};const j={class:"buttons-row"},L=C("span",{class:"text-h5"},"Create Article",-1),P=C("span",{class:"text-h5"},"Edit Article",-1),S={key:0};function z(l,i,V,G,H,J){const d=r("v-btn"),o=r("v-col"),s=r("v-row"),f=r("v-card-title"),E=r("v-card-subtitle"),_=r("v-card-item"),U=r("v-img"),m=r("v-card-text"),h=r("v-card-actions"),p=r("v-card"),c=r("v-text-field"),b=r("v-select"),w=r("v-file-input"),k=r("v-container"),I=r("v-alert"),v=r("v-dialog"),M=r("v-spacer");return u(),D($,null,[e(s,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[C("div",j,[e(d,{color:"green",onClick:i[0]||(i[0]=a=>l.opencreateArticleDialog()),"prepend-icon":"mdi-plus"},{default:t(()=>[n("Create")]),_:1})])]),_:1})]),_:1}),e(s,null,{default:t(()=>[(u(!0),D($,null,F(l.articles,a=>(u(),A(o,{key:a.id,class:"d-flex child-flex",cols:"12",md:"5",sm:"6",lg:"4",xl:"3",xxl:"2"},{default:t(()=>[e(p,null,{default:t(()=>[e(_,null,{default:t(()=>[e(f,null,{default:t(()=>[e(s,null,{default:t(()=>[e(o,{cols:"8"},{default:t(()=>[n(g(a.title),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(E,null,{default:t(()=>[e(s,null,{default:t(()=>[e(o,{cols:"8"},{default:t(()=>[n(g(a.author),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(m,null,{default:t(()=>[e(U,{src:a.image_url,alt:"Article Image"},null,8,["src"])]),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(m,null,{default:t(()=>[n(g(a.link),1)]),_:2},1024)]),_:2},1024),e(h,null,{default:t(()=>[e(s,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(d,{color:"green",onClick:B=>l.openEditDialog(a),"prepend-icon":"mdi-pencil"},{default:t(()=>[n("Edit")]),_:2},1032,["onClick"]),e(d,{color:"red",onClick:B=>l.openDeleteDialog(a),"prepend-icon":"mdi-delete"},{default:t(()=>[n("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(v,{modelValue:l.createArticleDialog,"onUpdate:modelValue":i[7]||(i[7]=a=>l.createArticleDialog=a),width:"1024"},{default:t(()=>[e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[L]),_:1}),e(m,null,{default:t(()=>[e(k,null,{default:t(()=>[e(s,null,{default:t(()=>[e(o,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[e(d,{color:"grey",onClick:i[1]||(i[1]=a=>l.closecreateArticleDialog())},{default:t(()=>[n("Close")]),_:1})]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(o,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(c,{modelValue:l.newArticle.title,"onUpdate:modelValue":i[2]||(i[2]=a=>l.newArticle.title=a),label:"Title",required:""},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(c,{modelValue:l.newArticle.author,"onUpdate:modelValue":i[3]||(i[3]=a=>l.newArticle.author=a),label:"Author",required:""},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(c,{modelValue:l.newArticle.link,"onUpdate:modelValue":i[4]||(i[4]=a=>l.newArticle.link=a),label:"Link",required:""},null,8,["modelValue"])]),_:1}),e(b,{modelValue:l.newArticle.publication_id,"onUpdate:modelValue":i[5]||(i[5]=a=>l.newArticle.publication_id=a),label:"Publication",items:l.publications,"item-title":"name","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(s,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[e(w,{label:"Image",accept:"image/*",onChange:l.onNewArticleFileChange},null,8,["onChange"])]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(o,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[e(d,{color:"green",onClick:i[6]||(i[6]=a=>l.createArticle())},{default:t(()=>[n(" Create Article ")]),_:1})]),_:1})]),_:1})]),_:1}),l.newArticleErrorMessage?(u(),A(I,{key:0,type:"error"},{default:t(()=>[n(g(l.newArticleErrorMessage),1)]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(v,{modelValue:l.editArticleDialog,"onUpdate:modelValue":i[16]||(i[16]=a=>l.editArticleDialog=a),width:"1024"},{default:t(()=>[e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[P]),_:1}),e(m,null,{default:t(()=>[e(k,null,{default:t(()=>[e(s,null,{default:t(()=>[e(o,{cols:"12",class:"d-flex justify-end"},{default:t(()=>[e(d,{color:"grey",onClick:i[8]||(i[8]=a=>l.editArticleDialog=!1)},{default:t(()=>[n("Close")]),_:1})]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(o,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(c,{modelValue:l.editArticle.title,"onUpdate:modelValue":i[9]||(i[9]=a=>l.editArticle.title=a),label:"Title",required:""},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(c,{modelValue:l.editArticle.author,"onUpdate:modelValue":i[10]||(i[10]=a=>l.editArticle.author=a),label:"Author",required:""},null,8,["modelValue"])]),_:1}),e(o,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(c,{modelValue:l.editArticle.link,"onUpdate:modelValue":i[11]||(i[11]=a=>l.editArticle.link=a),label:"Link",required:""},null,8,["modelValue"])]),_:1}),e(b,{modelValue:l.editArticle.publication_id,"onUpdate:modelValue":i[12]||(i[12]=a=>l.editArticle.publication_id=a),label:"Publication",items:l.publications,"item-title":"name","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(s,null,{default:t(()=>[e(o,{cols:"12"},{default:t(()=>[l.editImageChangeDialogBtn?(u(),D("div",S,[e(w,{label:"Image",accept:"image/*",onChange:l.onExistingArticleImageChange},null,8,["onChange"]),e(d,{onClick:i[13]||(i[13]=a=>l.editImageChangeDialogBtn=!1)},{default:t(()=>[n("Cancel File Change")]),_:1})])):(u(),A(d,{key:1,onClick:i[14]||(i[14]=a=>l.editImageChangeDialogBtn=!0)},{default:t(()=>[n("Edit image")]),_:1}))]),_:1})]),_:1})]),_:1}),l.editArticleErrorMessage?(u(),A(I,{key:0,type:"error"},{default:t(()=>[n(g(l.editArticleErrorMessage),1)]),_:1})):y("",!0)]),_:1}),e(h,{class:"d-flex justify-end"},{default:t(()=>[e(d,{color:"green",onClick:i[15]||(i[15]=a=>l.updateArticle()),loading:l.articleIsUpdating,disabled:l.articleIsUpdating},{default:t(()=>[n(" Update ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(v,{modelValue:l.deleteArticleDialog,"onUpdate:modelValue":i[19]||(i[19]=a=>l.deleteArticleDialog=a),width:"1200",persistent:""},{default:t(()=>[e(p,null,{default:t(()=>[e(f,{class:"text-h5"},{default:t(()=>[n(" Are you sure you want to delete this article? ")]),_:1}),e(h,null,{default:t(()=>[e(d,{color:"red",onClick:i[17]||(i[17]=a=>l.deleteArticle()),loading:l.articleIsDeleting,disabled:l.articleIsDeleting},{default:t(()=>[n("Delete")]),_:1},8,["loading","disabled"]),e(M),e(d,{color:"grey",onClick:i[18]||(i[18]=a=>l.deleteArticleDialog=!1)},{default:t(()=>[n("Cancel")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const O=N(T,[["render",z]]);export{O as default};
